<mat-toolbar color="primary" class="mat-elevation-z4">
    <button mat-icon-button routerLink="/">
        <mat-icon>arrow_back</mat-icon>
    </button>

    <span>{{translation.transfer[global.lang]}}</span>
    <span class="fill-remaining-space"></span>
</mat-toolbar>
<div class="out-toolbar">
    <mat-spinner *ngIf="loading; else loaded"></mat-spinner>
    <ng-template #loaded>
        <form #form="ngForm" (ngSubmit)="transfer()">
            <mat-card>
                <mat-form-field fxFill>
                    <input matInput placeholder="{{translation.recipient[global.lang]}}" [(ngModel)]="recipient" name="recipient" [matAutocomplete]="auto" required>
                    <button mat-button color="accent" matSuffix type="button" routerLink="/transactions/scan"><mat-icon>center_focus_strong</mat-icon></button>
                </mat-form-field>
                <mat-autocomplete #auto="matAutocomplete">
                    <mat-option *ngIf="recipient" [value]="recipient">{{translation.address[global.lang]}} "{{recipient}}"</mat-option>
                    <mat-option *ngIf="recipient" (click)="resolveNamespace()" [value]="recipient">{{translation.namespace[global.lang]}}
                        "{{recipient}}"</mat-option>
                </mat-autocomplete>
            </mat-card>
            <mat-card>
                <mat-form-field fxFill>
                    <input matInput placeholder="{{translation.message[global.lang]}}" [(ngModel)]="message" name="message">
                    <mat-slide-toggle fxFill matSuffix [(ngModel)]="encrypt" name="encrypt">{{translation.encryption[global.lang]}}</mat-slide-toggle>
                </mat-form-field>
            </mat-card>
            <mat-card>
                <app-mosaic-list [title]="translation.balance[global.lang]" [mosaics]="global.mosaics"></app-mosaic-list>
            </mat-card>
            <mat-card>
                <mat-card-header>
                    <mat-card-title>
                        {{translation.amount[global.lang]}}
                    </mat-card-title>
                </mat-card-header>
                <mat-form-field fxFill *ngFor="let m of transferMosaics; let i = index">
                    <input matInput type="number" placeholder="{{m.name}}" [(ngModel)]="transferMosaics[i].amount" name="amount{{i}}" [matTooltip]="translation.inputEmpty[global.lang]" min="0">
                </mat-form-field>
            </mat-card>
            <button fxFill mat-raised-button color="accent" [disabled]="form.invalid">{{translation.submit[global.lang]}}</button>
        </form>
    </ng-template>
</div>